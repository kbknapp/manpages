." Text automatically generated by txt2man
.TH thin_dump 8 "Device Mapper Tools" "System Manager's Manual"
.SH NAME
\fBthin_dump \fP- dump thin provisioning metadata from device or file to standard output.
\fB
.SH SYNOPSIS
.nf
.fam C
\fBthin_dump\fP [\fIoptions\fP] {device|file}
.fam T
.fi
.SH DESCRIPTION
\fBthin_dump\fP dumps binary thin provisioning metadata (optionally from alternate
block; see option \fB--metadata-snap\fP) created by the
device-mapper thin provisioning target on a device or file to standard
output for analysis or postprocessing in either XML or human readable format.
XML formated metadata can be fed into thin_restore (see \fBthin_restore\fP(8))
in order to put it back onto a metadata device (to process by the
device-mapper target) or file.
.PP
This tool cannot be run on live metadata unless the \fB--metadata-snap\fP
option is used.
.SH OPTIONS
.TP
.B
\fB-h\fP, \fB--help\fP
Print help and exit.
.TP
.B
\fB-V\fP, \fB--version\fP
Print version information and exit.
.TP
.B
\fB-f\fP, \fB--format\fP {xml|human_readable|custom}
Choose output format.
.PP
.nf
.fam C
    Custom formats are supported via shared library plugins.  They should be
    specified as in this example:

.nf
.fam C
      $ thin_dump --format custom=mylib.so /dev/sda

.fam T
.fi
.TP
.B
\fB-r\fP, \fB--repair\fP
Repair the metadata whilst dumping it.
.TP
.B
\fB-m\fP, \fB--metadata-snap\fP{=<block nr>}
Dump metadata snapshot.
.PP
.nf
.fam C
    If block is not provided, access the default metadata snapshot created by
    the thin provisioning device-mapper target, else try the one at block nr.
    See the thin provisioning target documentation on how to create or release
    a metadata snapshot and retrieve the block number from the kernel.

.fam T
.fi
.TP
.B
\fB--dev-id\fP {natural}
Dump the specified device.
.PP
.nf
.fam C
    This option may be specified multiple times to select more than one thin
    device.

.fam T
.fi
.TP
.B
\fB--skip-mappings\fP
Do not dump the mappings.
.TP
.B
\fB-o\fP {xml file}
Specify a file for the output rather than writing to stdout.
.SH EXAMPLES
Dumps the thin provisioning metadata on logical volume /dev/vg/metadata to
standard output in human readable format:
.PP
.nf
.fam C
    $ thin_dump -f human_readable /dev/vg/metadata

.fam T
.fi
Dumps the thin provisioning metadata on logical volume /dev/vg/metadata to
standard output in XML format:
.PP
.nf
.fam C
    $ thin_dump /dev/vg/metadata

.fam T
.fi
Dumps the thin provisioning metadata snapshot on logical volume /dev/vg/metadata
to standard output in human readable format (not processable by \fBthin_restore\fP(8)):
.PP
.nf
.fam C
    $ thin_dump --format human_readable --metadata-snap /dev/vg/metadata

.fam T
.fi
.SH DIAGNOSTICS
\fBthin_dump\fP returns an exit code of 0 for success or 1 for error.
.SH SEE ALSO
\fBthin_check\fP(8), \fBthin_repair\fP(8), \fBthin_restore\fP(8), \fBthin_rmap\fP(8), \fBthin_metadata_size\fP(8)
.SH AUTHOR
Joe Thornber <ejt@redhat.com>, Heinz Mauelshagen <HeinzM@RedHat.com>
