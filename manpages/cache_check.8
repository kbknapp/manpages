." Text automatically generated by txt2man
.TH cache_check 8 "Device Mapper Tools" "System Manager's Manual"
.SH NAME
\fBcache_check \fP- validates cache metadata on a device or file.
\fB
.SH SYNOPSIS
.nf
.fam C
\fBcache_check\fP [\fIoptions\fP] {device|file}
.fam T
.fi
.SH DESCRIPTION
\fBcache_check\fP checks cache metadata created by the device-mapper cache target
on a device or file.
.PP
This tool cannot be run on live metadata.
.SH OPTIONS
.TP
.B
\fB-h\fP, \fB--help\fP
Print help and exit.
.TP
.B
\fB-V\fP, \fB--version\fP
Output version information and exit.
.TP
.B
\fB-q\fP, \fB--quiet\fP
Suppress output messages, return only exit code.
.TP
.B
\fB--super-block-only\fP
Only check the superblock.
.TP
.B
\fB--skip-hints\fP
Skip checking of the policy hint values metadata.
.TP
.B
\fB--skip-discards\fP
Skip checking of the discard bits in the metadata.
.TP
.B
\fB--clear-needs-check-flag\fP
Clears the 'needs_check' flag in the superblock.
.PP
.nf
.fam C
    The kernel may set a flag to force the pool to be checked before it's next
    activated.  Set this switch to clear the flag if the check is successful.
    If the metadata check failed, the flag is not cleared and a cache_repair run
    is needed to fix any issues. After cache_repair succeeded, you may run
    cache_check again.

.fam T
.fi
.SH EXAMPLE
Analyses and repairs cache metadata on logical volume /dev/vg/metadata:
.PP
.nf
.fam C
    $ cache_check /dev/vg/metadata

.fam T
.fi
The device may not be actively used by the target when running.
.SH DIAGNOSTICS
\fBcache_check\fP returns an exit code of 0 for success or 1 for error.
.SH SEE ALSO
\fBcache_dump\fP(8), \fBcache_repair\fP(8), \fBcache_restore\fP(8)
.SH AUTHOR
Joe Thornber <ejt@redhat.com>, Heinz Mauelshagen <HeinzM@RedHat.com>
